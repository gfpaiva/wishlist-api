[![Python application](https://github.com/gfpaiva/wishlist-api/workflows/Python%20application/badge.svg)](https://github.com/gfpaiva/wishlist-api/actions?query=workflow%3A%22Python+application%22)
[![CodeFactor](https://www.codefactor.io/repository/github/gfpaiva/wishlist-api/badge)](https://www.codefactor.io/repository/github/gfpaiva/wishlist-api)
[![codecov](https://codecov.io/gh/gfpaiva/wishlist-api/branch/main/graph/badge.svg?token=MRSD5MVV9H)](https://codecov.io/gh/gfpaiva/wishlist-api)
[![StackShare](http://img.shields.io/badge/tech-stack-0690fa.svg?style=flat)](https://stackshare.io/gfpaiva/wishlist-api)

# WISHLIST API

[Wishlist Api](https://gfpaiva-wishlist-api.herokuapp.com/docs) √â uma API P√∫blica (com autentica√ß√£o de aplica√ß√£o) para criar e gerenciar listas de desejos.

Criado como side project para estudo e divers√£o ü§ì.  
Desenvolvido a partir das especifica√ß√µes t√©cnicas do desafio t√©cnico do [LuizaLabs](http://luizalabs.com/), consumindo [API externa](https://gist.github.com/Bgouveia/9e043a3eba439489a35e70d1b5ea08ec) para detalhe dos produtos.

## ‚öôÔ∏è Requisitos

Recomendado (principalmente para desenvolvimento local):

- [Docker\*](https://www.docker.com/)

Ou instala√ß√£o a parte dos servi√ßos:

- [Python 3.8](https://www.python.org/)
- [Postgres 13.0](http://postgresql.org/)
- [Redis](https://redis.io/)

\* Dica para linux: [Post-installation](https://docs.docker.com/engine/install/linux-postinstall/) recomendado para n√£o precisar rodar comandos docker com `sudo` üòâ

## üèÉüèΩ‚Äç‚ôÇÔ∏è Rodando local

Primeiro de tudo voc√™ precisa criar um arquivo `.env` na raiz do projeto.  
Voc√™ pode usar o arquivo `.env.example`, apenas duplic√°-lo e renome√°-lo para `.env` j√° te deixa preparado para o desenvolvimento local.

Scripts:

| comando       | descri√ß√£o                                                                                     |
| ------------- | --------------------------------------------------------------------------------------------- |
| make dev      | Encerra processo anterior, e cria novo atrav√©s do _docker-compose_ (python, postgres e redis) |
| make dev-logs | Exibe logs dos servi√ßos do _docker-compose_ caso estejam rodando                              |

Caso seu sistema n√£o tenha suporte para rodar comandos do [make](https://pt.wikipedia.org/wiki/Makefile) voc√™ pode copiar e rodar manualmente as receitas que est√£o no arquivo `./Makefile`.  
Ap√≥s os servi√ßos e aplica√ß√£o rodando, voc√™ pode acessar [http://localhost:3000](http://localhost:3000) para desenvolvimento e teste da API. Todos os endpoints est√£o documentados via [SwaggerUI](https://swagger.io/tools/swagger-ui/), que pode ser acessado no endere√ßo [http://localhost:3000/docs](http://localhost:3000/docs).

Uma autentica√ß√£o inicial √© criada para realizar os testes local:

- usu√°rio `wishlist`
- senha `wishlist`

(receitas podem ser conferidas em `db/init.sql`)

## ‚úîÔ∏è Qualidade

Alguns checks feitos no c√≥digo assegurando mais qualidade:

- [Github Actions](https://github.com/gfpaiva/wishlist-api/actions?query=workflow%3A%22Python+application%22) (Lint e testes)
- [CodeCov](https://codecov.io/gh/gfpaiva/wishlist-api) (Cobertura de testes)
- [CodeFactor](https://www.codefactor.io/repository/github/gfpaiva/wishlist-api) (CodeScanner verificando vulnerabilidades e code smells)

## üîç Testes

Scripts:

| comando               | descri√ß√£o                                                                                          |
| --------------------- | -------------------------------------------------------------------------------------------------- |
| make test             | Roda testes de unidade dos services da aplica√ß√£o                                                   |
| make test-cov         | Roda testes de unidade dos services da aplica√ß√£o e gera relat√≥rios de coverage                     |
| make test-integration | Inicia servi√ßos atrav√©s do _docker-compose_ e roda testes de integra√ß√£o dos endpoints da aplica√ß√£o |

## üöÄ Deploy

Hospedado no [Heroku](https://www.heroku.com/). E pode ser acessado no endere√ßo [https://gfpaiva-wishlist-api.herokuapp.com/docs](https://gfpaiva-wishlist-api.herokuapp.com/docs) (Documenta√ß√£o)  
Processo de deploy e build s√£o feitos automaticamente ap√≥s sucesso dos checks do Github Actions na branch `main`.
